limit = 0

[keys]
  up = ["up", "k"]
  down = ["down", "j"]
  jump_to_parent = ["J"]
  jump_to_children = ["K"]
  jump_to_working_copy = ["@"]
  apply = ["enter"]
  force_apply = ["alt+enter"]
  cancel = ["esc"]
  toggle_select = [" "]
  new = ["n"]
  commit = ["c"]
  refresh = ["ctrl+r"]
  abandon = ["a"]
  diff = ["d"]
  quit = ["q"]
  help = ["?"]
  describe = ["D"]
  edit = ["e"]
  force_edit = ["alt+e"]
  diffedit = ["E"]
  absorb = ["A"]
  split = ["s"]
  undo = ["u"]
  revset = ["L"]
  exec_jj = [":"]
  exec_shell = ["$"]
  ace_jump = ["f"]
  quick_search = ["/"]
  quick_search_cycle = ["'"]
  custom_commands = ["x"]
  leader = ["\\"]
  suspend = ["ctrl+z"]
  set_parents = ["M"]
  [keys.rebase]
    mode = ["r"]
    revision = ["r"]
    source = ["s"]
    branch = ["B"]
    after = ["a"]
    before = ["b"]
    onto = ["d"]
    insert = ["i"]
    skip_emptied = ["e"]
  [keys.revert]
    mode = ["R"]
    after = ["a"]
    before = ["b"]
    onto = ["d"]
    insert = ["i"]
  [keys.duplicate]
    mode = ["y"]
    after = ["a"]
    before = ["b"]
    onto = ["d"]
  [keys.squash]
    mode = ["S"]
    keep_emptied = ["e"]
    interactive = ["i"]
  [keys.details]
    mode = ["l"]
    close = ["h"]
    split = ["s"]
    squash = ["S"]
    restore = ["r"]
    absorb = ["A"]
    diff = ["d"]
    select = ["m", " "]
    revisions_changing_file = ["*"]
  [keys.evolog]
    mode = ["v"]
    diff = ["d"]
    restore = ["r"]
  [keys.preview]
    mode = ["p"]
    toggle_bottom = ["P"]
    scroll_up = ["ctrl+p"]
    scroll_down = ["ctrl+n"]
    half_page_down = ["ctrl+d"]
    half_page_up = ["ctrl+u"]
    expand = ["ctrl+h"]
    shrink = ["ctrl+l"]
  [keys.bookmark]
    mode = ["b"]
    set = ["B"]
    delete = ["d"]
    move = ["m"]
    forget = ["f"]
    track = ["t"]
    untrack = ["u"]
  [keys.inline_describe]
    mode = ["enter"]
    accept = ["alt+enter", "ctrl+s"]
  [keys.git]
    mode = ["g"]
    push = ["p"]
    fetch = ["f"]
  [keys.oplog]
    mode = ["o"]
    restore = ["r"]
  [keys.file_search]
    toggle = ["ctrl+t"]
    up = ["up"]
    down = ["down"]
    accept = ["enter"]
    edit = ["alt+e"]


[ui]
  theme = ""
  auto_refresh_interval = 0

[ui.tracer]
  enabled = false

[ui.colors]

[revisions]
  log_batching = true
  # template = 'builtin_log_compact' # overrides jj's templates.log
  # revset = "zzzzzzz"               # overrides jj's revsets.log

[preview]
  revision_command = ["show", "--color", "always", "-r", "$change_id"]
  oplog_command = ["op", "show", "$operation_id", "--color", "always"]
  file_command = ["diff", "--color", "always", "-r", "$change_id", "$file"]
  show_at_bottom = false
  show_at_start = false
  width_percentage = 50.0
  width_increment_percentage = 5.0

[oplog]
  limit = 200

[graph]
  batch_size = 50

[actions]
  "revset.edit" = { args = { clear = true }, next = ["switch revset"]}
  "revisions.toggle_select" = { next = ["revisions.down"] }
  "inline_describe.accept" = { next = ["close inline_describe"] }
  "revisions.my_inline_describe" = { next = ["revisions.inline_describe", "wait close inline_describe", "revisions.new" ] }
  "oplog.restore" = { next = ["close oplog", "switch revisions" ] }
  "oplog.close" = { next = ["close oplog", "switch revisions" ] }
  "oplog.diff" = { next = ["ui.diff", "wait close diff", "switch oplog"] }
  "diff.close" = { next = ["close diff", "switch revisions"] }
  "set_parents.apply" = { next = ["close set_parents"] } 
  "abandon.apply" = { next = ["close abandon", "switch revisions" ] }
  "abandon.force_apply" = { next = ["close abandon", "switch revisions" ] }
  "abandon.close" = { next = ["close abandon", "switch revisions"] }
  "revisions.append_current_as_ancestor" = { id = "revset.set", args = { "revset" = "$revset | ancestors($change_id, 2)" },  next = [] }
  "squash.apply" = { next = [ "close squash", "switch revisions" ] }
  "squash.force_apply" = { id = "squash.apply", args = { "force" = true }, next = ["close squash", "switch revisions"] }
  "undo.close" = { next = ["close undo", "switch revisions"] }
  "undo.accept" = { next = ["close undo", "switch revisions"] }
  "diff_until_here" = { id = "ui.diff", next = [{ id = "diff.show", args = { "jj" = ["diff", "-r", "main..$change_id"] } }, "wait close diff", "switch revisions"] }

[bindings.revisions]
  "@" = "revisions.jump_to_working_copy"
  "enter" = "revisions.inline_describe"
  "j" = "revisions.down"
  "k" = "revisions.up"
  " " = "revisions.toggle_select"
  "J" = "revisions.jump_to_parent"
  "K" = "revisions.jump_to_children"
  "l" = "revisions.details"
  "S" = "revisions.squash"
  "r" = "revisions.rebase"
  "B" = "revisions.set_bookmark"
  "c" = "revisions.commit"
  "n" = "revisions.new"
  "A" = "revisions.absorb"
  "a" = "revisions.abandon"
  "s" = "revisions.split"
  "d" = "revisions.diff"
  "f" = "revisions.ace_jump"
  "v" = "revisions.evolog"
  "M" = "revisions.set_parents"
  "L" = "revset.edit"
  "ctrl+r" = "ui.refresh"
  "q" = "ui.quit"
  "o" = "ui.oplog"
  "u" = "ui.undo"
  "X" = "revisions.my_inline_describe"
  "+" = "revisions.append_current_as_ancestor"
  "ctrl+d"  = "diff_until_here"
[bindings.oplog]
  "k" = "oplog.up"
  "j" = "oplog.down"
  "d" = "oplog.diff"
  "r" = "oplog.restore"
  "esc" = "oplog.close"
  "q" = "ui.quit"
[bindings.details]
  "esc" = "close details"
  "h" =   "close details"
  " " =   "details.toggle_select"
  "j" =   "details.down"
  "k" =   "details.up"
  "d" =   "details.diff"
  "r" =   "details.restore"
  "s" =   "details.split"
  "S" =   "details.squash"
  "*" =   "details.show_revisions_changing_file"
  "A" =   "details.absorb"
[bindings.diff]
  "j" =      "diff.down"
  "k" =      "diff.up"
  "ctrl+d" = "diff.halfpagedown"
  "ctrl+u" = "diff.halfpageup"
  "f" =      "diff.pagedown"
  "b" =      "diff.pageup"
  "esc" =    "diff.close"
[bindings.set_parents]
  "j" =      "revisions.down"
  "k" =      "revisions.up"
  " " =      "set_parents.toggle_select"
  "enter" =  "set_parents.apply"
  "esc" =    "close set_parents"
[bindings.abandon]
  "y" = "abandon.accept"
  "alt+enter" = "abandon.force_apply"
  "n" =   "abandon.close"
  "esc" = "abandon.close"
[bindings.inline_describe]
  "esc" = "close inline_describe"
  "alt+enter" = "inline_describe.accept"
[bindings.squash]
  "j" = "revisions.down"
  "k" = "revisions.up"
  "i" = "squash.interactive"
  "e" = "squash.keep_emptied"
  "esc" = "close squash"
  "enter" = "squash.apply"
  "alt+enter" = "squash.force_apply"
[bindings.undo]
  "y" = "undo.accept"
  "n" = "undo.close"
  "esc" = "undo.close"
